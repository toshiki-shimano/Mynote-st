# Rubyとは

* Rubyでは、すべてのものはオブジェクトである。 すべての情報の塊・コードには、固有のプロパティとアクションを与えることができる。 オブジェクト指向プログラミングでは、プロパティはインスタンス変数、アクションはメソッドと呼ばれます。  

* Rubyでは、プロパティ(property)のことをアトリビュート(attribute)という。

## rubyのバージョン

★rbenv
⇒OSなどに標準装備されているrubyは、最新ではない可能性が高いため、rbenvなどを使ってバージョン管理をする。rbenvを使うと、複数のrubyのバージョンに切り替えることができるようになる（プロジェクトや開発現場によってバージョンが異なる為に必要）

★エンコーディングとマジックコメント
⇒ruby1.9だとエンコーディングがUS-ASCIIだったので半角の英数字しか使えず、日本語を使うには上記に # encoding: utf-8 というものを書かないといけなかった。ruby2.0以上でエンコーディングがUTF-8になったのでマジックコメントは不要になった。shift-jisを使いたいなら、マジックコメントを使えばいい。

## rubyの基本ルール

①変数名は基本スネークケースで書く  
⇒special_price（スネーク）とspecialPrice（キャメル）

②数字から始まる変数名は使えない

③シングルクオートは、\nと式展開（#{ }）はそのまま文字列になってしまう
⇒バックスラッシュの打消しは、ダブルクオート内でやること（name = "alice" puts "hello, \#{name}"）
⇒hello, #{name}という結果に

④整数同士の割り算は、整数になってしまう
⇒1 / 2 = 0になってしまう。
⇒1.0 / 2.0 = 0.5になり、片方が小数点であればよい（1 / 2.0 = 0.5）

⑤べき乗は**を使う  
⇒ puts 2**3 = 8になる

⑥丸め誤差について
⇒コンピュータが二進数を使って計算するために、きちんとした数字で返ってこない
⇒0.1 * 3.0 = 0.300000000000004なってしまう。これを解消するためには、小数点の計算は、rationalとto_fを使う
🔶重要🔶：丸め誤差はバグに繋がるので注意！小数点を扱う時は、rとto_fを利用する。
🔶重要🔶：「r」はintegerそのものに使えるが、もしその数字が変数に入っている場合は、rationalizeメソッドで「r」と同じことを出来る。掛けるほう、掛けられるほうどっちもメソッドを付ける必要あり

```ruby
0.1r * 3.0r 
#結果は、3/10
(0.1r * 3.0r).to_f
#結果は、0.3

0.1 * 3.0 # 0.30000000000000004
a = 0.1
b = 3.0
print (a.rationalize * b.rationalize).to_f
# ()と.to_fが無いと、3/10 あると0.3
```


⑦論理演算子の||と&&は&&の方が優先
⇒優先順位を変えたいなら、（）を使う

```ruby
条件１ && (条件２ || 条件３) && 条件４
#これは、条件１かつ 条件２か３ かつ条件４
```

⑧メソッドの定義について
⇒メソッドは最後に評価された式が戻り値
⇒rubyではreturnは脱出に使われることが多い

```ruby
def greeting(country)
  return "countryを入力してください" if country.nil? #対象がnilなら真となる
  #returnがあるので、このif文が真ならここで止まる（下のif文には行かない）
  if country == "japan"
    "こんにちは"
  elsif country == "us"
    "hello"
  else 
    "???"
  end  
end
puts greeting("japan") #こんにちは
puts greeting(nil) #countryを入力してください
```

## %記法

★%q!～!で挟むとシングルクオートになる  %Q!～!で挟むとダブルクオートになる  %!～!もダブルクオートになる
⇒p %q! hello, test! で " hello, test"
⇒！マークの代わりに、? と {}も使える

## ヒアドキュメント

★複数行にわたる長い文字列を書くには、こっちを使う
⇒識別子は自由につけていいが、文章の中に出てこない単語にする
⇒最初の識別子-を入れると最後の識別子をインデントしてもよくなる
⇒ヒアドキュメントは式展開が可能
🔶重要🔶：~を使うと最後の識別子はインデントしていいし、途中の文字列の頭のインデントは無くして詰めてくれる
🔶重要🔶：開始の識別子は1つの式として見なされるので、この開始の識別子をメソッドの引数として渡したり、この識別子にメソッドを与えることができる

```ruby
#<<識別子
#  1行目
#  2行目
#  3行目
# 識別子

a = <<TEXT
これはヒアドキュメントです。
複数の行の文字列を書くのに適しています。
いかかでしょうか
TEXT

puts a

def some_method
  <<~TEXT
  こんにちは
  さようなら
  おはよう
  こんばんは
  TEXT
end

puts some_method

a = "alice"
mail = <<~TEXT
ようこそ、#{a}さん
TEXT

puts mail

a = "ruby"
a.prepend(<<TEXT)
java
php
TEXT
puts a
# aのrubyの前に()内のもの入れる時に、ヒアも入れられる

a = <<TEXT.upcase
php
java
ruby
javascript
TEXT
puts a
# ヒアの中身が全て大文字になる
```
