# ブロック変数とそれを使うメソッド

## eachメソッド

```ruby
array = ["a", "b", "c" ]
sum = "#"
array.each do |str|
  sum += str
end
puts sum
#結果は#abc
```

⇒文字列の結合例。sumに最初から#が入っているのでそこに足されていく。

```ruby
numbers = [1, 2, 3, 4]
sum = 0
numbers.each { |n| sum += n}
puts sum
#結果は１０
```

⇒｜｜の中には、ブロック変数を入れることもできる。|n, m, p|など。｜｜の意味は次に書くコードでこの文字を変数として使うよという宣言になる。

## timesメソッド

⇒変数に0から対象のオブジェクトが持つ数値から1引いた数を順番に代入しながら、繰り返し処理を行う

```ruby
5.times{|num|
  print(num,"回目のHELLO\n");
}
#結果は、縦に０回目のHELLO 1回目のHELLOといった感じ
```
⇒５なら、最初の１ループ目の１を引いて、0回目

```ruby
number = gets.to_i
number.times do 
    print "*"
end
#getSの入力が３なら「***」
```

## uptoメソッド

⇒「upto」メソッドは、変数に「対象のオブジェクトが持つ数値」から「max」を順に代入しながら「{」から「}」までの処理(又は「do」から「end」までの処理)を実行します。1回繰り返す毎に1ずつ数値は増加します。

```ruby
i = gets.to_i
result = 0
1.upto(i) do |num|
    result +=  num
end
print result
# １０を入れたら結果：５５
```


## injectメソッド

```ruby
numbers = [1, 2, 3, 4]
sum = numbers.inject(0) { |result, n| result + n }
puts sum
#結果は１０
```

⇒injectでは引数の入り方にルールがある。numbersの１は最初にnに入る。そしてその結果がresultにプラスされていく。そうなると、２が入るときには、nに２、resultに１が入っている。injectメソッドの（）の引数は初期値を表しており、最初のresultの値を決めている。

## sortメソッド

```ruby
array = ["blue", "red", "yellow", "green"]
sorted = array.sort { |a, b| b.size <=> a.size }
print sorted
#結果は["yellow", "green", "blue", "red"]
```
⇒要素は||の中に順番に入っていく。|a, b|ならa⇒bの順で、|b, a|ならb⇒aの順で。次の要素の入り方には、それを書いた記事があるが、この場合、サイズの大きい順に並べている。ブロック変数の次のbとaの順番を反対に書くのがミソ。

## mapメソッド（collectメソッド）

* mapメソッドは、配列の要素の数だけブロック内の処理をして、結果を**配列**を返す。  

```ruby
a = [1, 2, 3]
a.map do |n|
    a =  n * 10
end
print a
#注意：結果は３０

a = [1, 2, 3]
sum = a.map do |n|
    n * 10
end
print sum
#結果は[10, 20, 30]
```

⇒map内のaを参照しても、三回目の処理の結果が返ってくるだけ。もし、map全体の結果を出したいなら、mapメソッドの結果ごと変数に入れる必要がある(sum)

```ruby
fruits = ["apple", "orange", "melon"]
result = fruits.map.with_index do |fruit, i|
  "#{i}: #{fruit}"
end
print result
#結果は["0:  apple",  "1:  orange",  "2:  melon"]
```
