# MVCとルーティングの知識

* 前知識

1. 3層構造（プレゼンテーション層【webブラウザとwebサーバー】，アプリケーション層【APサーバー】、データ層【DBサーバー】）があり、その一つの考えかたとしてMVCモデルがある

## ルーティングについて

* rais routesを打つと、、

|◎prefix |◎Verb |◎URI Pattern |◎Controller#Action|
|---|---|---|---|
|users|Get|/users(.:format)|user#index|

⇒グーグルからlocalhost:3000のlocalhost:3000/usersにブラウザからアクセスすると、上の例だと、その隣のコントローラーのindexアクションの処理がされる。  
⇒ブラウザからこのURI Pattern（/users）とGETというHTTPメソッドで送ると（リクエスト）ルーティングに行き、その中からマッチするものを探し、そのコントローラーのアクションの処理をすることになる。（ルーティングはどのコントローラー（クラス）の、どのアクション（メソッド）に繋げるかを担当する）

* prefixが空欄の所は、省略されているだけ。

### HTTPリクエスト

1. GET：URLの/notes?の？以降に情報を含めて送るやり方（/notes?approved=true #承認済みのレポートを表示したい）

## モデルについて

* モデルは、モデルに対応するRubyクラスとデータベースのテーブルから構成される。モデルが動作するには、データベースとモデルクラスの両方が必要である。（dbは別に作られるのだから、恐らくそれをrailsに反映させる機能がrubyクラスになる？）

## マイグレーションファイルについて

* マイグレーションファイルとはテーブルを作成するための設計図であり、migrateを実行すると作られるスキーマファイルは、現在のデータベースのカラムの内容をまとめたファイルである。

## コントローラーについて

* モデルとビューを統合的に制御する部分。ユーザーからの入力（リクエスト）を受け付けて、適切な出力（レスポンス）を作成するための制御をする部分。必ずｓを付けて作成する。

* モデルがあれば、アクションの中でそのモデルから検索して、変数に入れることができる

* モデルを呼ぶ、画面を表示する。

## ビューについて

* UIに関わる部分。UIとはユーザーからの入力を受け付けたり、アプリケーションの状態をユーザーの伝えたりする部分で、主に**画面**を指す。htmlなどのHTTPレスポンスの中身を組み立てる部分

* コントローラーから指定がなければ、最初からあるapplication.html.erbが適用される。

* 必要に応じてコントローラーからモデルのインスタンスなどを受け取り、画面表示に利用する

◆参考◆

『web技術の基本』
『Ruby on Rails 速習実践ガイド』
